function load_images(sources,callback){var images=new Array();var loadedImages=0;sources.forEach(function(value,index){images[index]=new Image();images[index].onload=function(){if(++loadedImages>=sources.length)callback(images)};images[index].src=value[0]})}function init_scene(images){var scene=new Kinetic.Stage({container:"kinetic",width:1200,height:900});var calque=new Kinetic.Layer();images.forEach(function(value,index){var image=new Kinetic.Image({x:sources_img[index][1],y:sources_img[index][2],image:value,width:sources_img[index][3],height:sources_img[index][4],rotation:sources_img[index][5],name:sources_img[index][6]});image.on("click",function(){window.location.href=sources_img[index][10]});image.on('mouseover touchstart',function(){if(this.getName()!=="lien"){document.body.style.cursor="pointer";this.setX(sources_img[index][1]-10);this.setY(sources_img[index][2]-10);this.setHeight(sources_img[index][4]+20);this.setWidth(sources_img[index][3]+20);calque.draw()}});image.on('mouseout touchend',function(){if(this.getName()!=="lien"){document.body.style.cursor="default";this.setX(sources_img[index][1]);this.setY(sources_img[index][2]);this.setHeight(sources_img[index][4]);this.setWidth(sources_img[index][3]);calque.draw()}});calque.add(image);if(sources_img[index][6]!=="lien"){var texte=new Kinetic.Text({x:sources_img[index][1]+sources_img[index][7],y:sources_img[index][2]+sources_img[index][8],text:sources_img[index][6].toUpperCase(),fontSize:sources_img[index][9],fontFamily:'Calibri',fill:'#FFF',padding:10,align:'center',shadowColor:'white'});var rect=new Kinetic.Rect({x:sources_img[index][1]+sources_img[index][7],y:sources_img[index][2]+sources_img[index][8],fill:'#FFF',width:texte.getWidth(),height:texte.getHeight(),cornerRadius:10,opacity:0.17});calque.add(rect);calque.add(texte)}});scene.add(calque)}